# Fichier: config.yaml
# Version: 17.0.0 (SMC-Targeting-Config)

api:
  host: 127.0.0.1
  port: 5000

mt5_credentials:
  login: 10004952
  password: "jsne80aX!"
  server: "Axi-US50-Demo"

professional_journal:
  enabled: true
  file_path_template: "Journal_Trading_{month_name}_{year}.csv"

# --- NOUVELLE SECTION ---
sound_alerts:
  enabled: true                 # Activer (true) ou désactiver (false) les alertes sonores
  sound_file: "./alert.wav"     # Chemin vers le fichier son (.wav ou .mp3 recommandé)
  
trading_settings:
  live_trading_enabled: false
  magic_number: 13579
  symbols:
  - XAUUSD
  - XAGUSD
  - EURUSD
  - GBPUSD
  - NZDUSD
  - AUDUSD
  - USDCAD
  - USOIL
  - BTCUSD
  - ETHUSD
  
  crypto_symbols:
  - BTCUSD
  - ETHUSD

  timeframe: M15
  
  trading_sessions:
  - "1-07:00-20:00" # Lundi
  - "2-07:00-20:00" # Mardi
  - "3-07:00-20:00" # Mercredi
  - "4-07:00-20:00" # Jeudi
  - "5-07:00-20:00" # Vendredi

risk_management:
  risk_per_trade: 0.01
  daily_loss_limit_percent: 20.0
  

  # --- MODIFICATION ---
  # Stratégie de placement du Stop Loss
  # Options: "ATR_MULTIPLE", "SMC_STRUCTURE"
  sl_strategy: "SMC_STRUCTURE"

  # Buffer (marge) ajouté au SL structurel (en pips)
  sl_buffer_pips: 5

  # Stratégie de placement du Take Profit
  # Options: "ATR_MULTIPLE", "SMC_LIQUIDITY_TARGET"
  sl_tp_strategy: "SMC_LIQUIDITY_TARGET" # Renommé sl_tp_strategy -> tp_strategy pour clarté ? Non, gardons sl_tp_strategy pour l'instant

  atr_settings: # Toujours utilisé pour le fallback SL et/ou si stratégie ATR choisie
    default:
      period: 14
      sl_multiple: 1.5 # Utilisé si sl_strategy=ATR ou en fallback
      tp_multiple: 3.0 # Utilisé si sl_tp_strategy=ATR ou en fallback
    XAUUSD:
      sl_multiple: 1.8
      tp_multiple: 3.5
    BTCUSD: # Exemple de configuration spécifique (peut être ajusté)
      sl_multiple: 1.2
      tp_multiple: 2.5
    ETHUSD:
      sl_multiple: 1.2
      tp_multiple: 2.5

  breakeven:
    enabled: true
    trigger_pips: 100 # Seuil en pips pour déclencher le BE
    pips_plus: 10   # Combien de pips au-dessus/en dessous de l'entrée placer le SL BE

  trailing_stop_atr:
    enabled: true
    activation_multiple: 2.0 # Multiple ATR de gain requis pour activer TSL
    trailing_multiple: 1.8   # Multiple ATR pour suivre le prix

pattern_detection:
  ORDER_BLOCK: true
  CHANGE_OF_CHARACTER: true
  INBALANCE: true
  LIQUIDITY_GRAB: true
  SMC_AMD_SESSION: true # Renommé pour clarté, était PATTERN_AMD

trend_filter:
  enabled: true
  higher_timeframe: H4
  ema_period: 200 # Sera remplacé par analyse structurelle si Optimisation 2 réalisée

learning:
  enabled: false
  min_trades_for_analysis: 10

backtest_settings:
  simulated_spread_pips: 1.5
  commission_per_lot: 7.0
  # Choisissez entre "ATR_MULTIPLE" (basé sur la volatilité) 
  # et "SMC_LIQUIDITY_TARGET" (basé sur la structure du marché)
  sl_tp_strategy: "SMC_LIQUIDITY_TARGET" 
  
  atr_settings: # Toujours utilisé pour le SL
    default:
      period: 14
      sl_multiple: 1.5
      tp_multiple: 3.0 # Utilisé seulement si sl_tp_strategy est "ATR_MULTIPLE"
    XAUUSD:
      sl_multiple: 1.8
      tp_multiple: 3.5
  breakeven:
    enabled: true
    trigger_pips: 100
    pips_plus: 10
  trailing_stop_atr:
    enabled: true
    activation_multiple: 2.0
    trailing_multiple: 1

pattern_detection:
  ORDER_BLOCK: true
  CHANGE_OF_CHARACTER: true
  INBALANCE: true
  LIQUIDITY_GRAB: true
  SMC_AMD_SESSION: true

trend_filter:
  enabled: true
  higher_timeframe: H4
  ema_period: 200

learning:
  enabled: false
  min_trades_for_analysis: 10

backtest_settings:
  simulated_spread_pips: 1.5
  commission_per_lot: 7.0